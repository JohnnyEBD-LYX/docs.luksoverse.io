"use strict";(self.webpackChunkcommunity_docs=self.webpackChunkcommunity_docs||[]).push([[8814],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>y});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),y=o,h=p["".concat(l,".").concat(y)]||p[y]||d[y]||i;return n?a.createElement(h,r(r({ref:t},u),{},{components:n})):a.createElement(h,r({ref:t},u))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4970:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const i={},r=void 0,s={unversionedId:"complete-node-guide/access-connection/key-login",id:"complete-node-guide/access-connection/key-login",title:"key-login",description:"5.4 Configuring a Login Key",source:"@site/docs/complete-node-guide/5-access-connection/04-key-login.md",sourceDirName:"complete-node-guide/5-access-connection",slug:"/complete-node-guide/access-connection/key-login",permalink:"/docs/complete-node-guide/access-connection/key-login",draft:!1,editUrl:"https://github.com/Luksoverse/community-docs/tree/main/packages/create-docusaurus/templates/shared/docs/complete-node-guide/5-access-connection/04-key-login.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ssh-test",permalink:"/docs/complete-node-guide/access-connection/ssh-test"},next:{title:"secure-auth",permalink:"/docs/complete-node-guide/access-connection/secure-auth"}},l={},c=[{value:"5.4 Configuring a Login Key",id:"54-configuring-a-login-key",level:2},{value:"SSH Keys",id:"ssh-keys",level:4},{value:"Keys in Traveling Situations",id:"keys-in-traveling-situations",level:4},{value:"SSH Key Generation Tool",id:"ssh-key-generation-tool",level:4},{value:"5.4.1 Checking for existing keys",id:"541-checking-for-existing-keys",level:2},{value:"5.4.2 Creating a new key",id:"542-creating-a-new-key",level:3},{value:"RSA Cryptography",id:"rsa-cryptography",level:4},{value:"5.4.3 Defining a keyname",id:"543-defining-a-keyname",level:3},{value:"5.4.4 Adding a passphrase",id:"544-adding-a-passphrase",level:3},{value:"5.4.5 Backing up the private key",id:"545-backing-up-the-private-key",level:3},{value:"5.4.6 Copying the public key to the node",id:"546-copying-the-public-key-to-the-node",level:3},{value:"5.4.7 Checking for the added keys",id:"547-checking-for-the-added-keys",level:3}],u={toc:c};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"54-configuring-a-login-key"},"5.4 Configuring a Login Key"),(0,o.kt)("p",null,"In the next step, we will significantly increase the security of the node access flow by using SSH keys for authentication instead of the basic password."),(0,o.kt)("h4",{id:"ssh-keys"},"SSH Keys"),(0,o.kt)("p",null,"SSH keys are a widely used cryptographic method for providing secure and passwordless authentication between a client and a server. They are based on the concept of public-key cryptography, where a pair of keys is generated: one private key, which should be kept secret, and one public key, which can be freely shared."),(0,o.kt)("p",null,"The process of using SSH keys involves generating a key pair on the client machine and then copying the public key to the server. When the client attempts to authenticate with the server, it will prove its identity by performing a cryptographic operation with the private key. The server can verify this operation using the public key without ever needing to see the private key. This method of authentication is not only more secure than using passwords but also more convenient, as it eliminates the need to remember and enter complex passwords."),(0,o.kt)("h4",{id:"keys-in-traveling-situations"},"Keys in Traveling Situations"),(0,o.kt)("p",null,"When it comes to storing your private SSH key, especially while traveling or in situations where your device may be damaged or lost, it's crucial to ensure the key's safety. Here are some recommendations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Backup"),": Always create a backup of your private key and store it in a secure and separate location. This could be an encrypted USB drive, an encrypted cloud storage service, or a hardware security device like a YubiKey."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Encryption"),": Ensure that your private key is protected with a strong passphrase. This adds an extra layer of security by requiring the passphrase to be entered before the key can be used, even if someone gains access to the file.")),(0,o.kt)("p",null,"If you really want to go crazy on security, the following might be something to have a look at. In my opinion, its a bit exaggerated because on your node, all keys are encrypted, and there is no critical or dangerous data on it if you chose strong passwords for your validator wallet."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Hardware Tokens"),": You could consider using hardware tokens like YubiKey or other FIDO U2F devices, which store your private key securely on a physical device. These devices are designed to protect cryptographic keys from theft or unauthorized access and can be carried with you while traveling.")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Ledger supports the FIDO application and you could use your Ledger device to log into your node, not only to protect the validator's withdrawel and fee addresses.")),(0,o.kt)("h4",{id:"ssh-key-generation-tool"},"SSH Key Generation Tool"),(0,o.kt)("p",null,"SSH-Keygen is a widely used command-line tool for generating, managing, and converting SSH public and private key pairs. It is an integral part of the OpenSSH suite, which provides secure and encrypted communication over a network using the SSH protocol."),(0,o.kt)("h2",{id:"541-checking-for-existing-keys"},"5.4.1 Checking for existing keys"),(0,o.kt)("p",null,"In case you already created keys before, lets check the default key directory."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"In case you have set up a custom key path, adjust the command accordingly.")),(0,o.kt)("p",null,"The default location is the ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.ssh")," directory in your home folder, and the default name depends on the key type are the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"RSA keys"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.ssh/id_rsa")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"ECDSA keys"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.ssh/id_ecdsa")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Ed25519 keys"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.ssh/id_ed25519"))),(0,o.kt)("p",null,"There isn't a specific command to list all SSH keys generated on the device, but you can achieve this by listing the contents of the",(0,o.kt)("inlineCode",{parentName:"p"}," ~/.ssh")," directory. Therefore, we use the default command-line utility ",(0,o.kt)("inlineCode",{parentName:"p"},"ls"),", used for listing the contents of a directory. When executed, it displays files and directories within the specified directory or, if no directory is specified, within the current working directory. In our case, we specifically search for files with the ",(0,o.kt)("inlineCode",{parentName:"p"},".pub")," type to show all public keys in the default folder."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ls ~/.ssh/*.pub\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NOTE"),": If you already generated one key, you could use if for the node. However, it is strongly recommended to always have one key pair for every application, so that a potential attacker can not get access to multiple authentication systems at once.")),(0,o.kt)("h3",{id:"542-creating-a-new-key"},"5.4.2 Creating a new key"),(0,o.kt)("p",null,"When generating a new SSH key pair, the ",(0,o.kt)("inlineCode",{parentName:"p"},"ssh-keygen")," command allows you to specify various options, such as the type of key, key length, and other configurations. The following options are used to define the type and strength of the generated key:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-t rsa"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"-t")," option is used to specify the type of key to generate. In our case, ",(0,o.kt)("inlineCode",{parentName:"li"},"rsa")," denotes that an RSA key pair will be generated."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-b 4096"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"-b")," option is used to specify the number of bits in the key. A higher number of bits usually results in a stronger key. In this case, 4096 indicates that a 4096-bit RSA key will be generated. The default key length for RSA keys is typically 2048 bits, but using a 4096-bit key provides an additional layer of security.")),(0,o.kt)("h4",{id:"rsa-cryptography"},"RSA Cryptography"),(0,o.kt)("p",null,"RSA is a widely used public-key cryptosystem in modern computing and cryptography. The RSA algorithm is based on the mathematical properties of large prime numbers and is used for secure data transmission, digital signatures, and encryption."),(0,o.kt)("p",null,"The main benefit for choosing it for SSH is that it is widely supported and compatible with most SSH clients and servers. RSA keys with a length of 4096 bits provide a high level of security. The only small deduction you have to make here is that RSA keys tend to be larger, and key generation and cryptographic operations can be slower compared to ECDSA and Ed25519."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"ECDSA is faster and more efficient. However, not as widely supported as RSA, and its security depends on the choice of the underlying elliptic curve."),(0,o.kt)("li",{parentName:"ul"},"Ed25519 is the most current supported and highly secure elliptic curve-based algorithm with excellent performance and more prone to attacks then ECDSA. However there may be some compatibility issues in some environments.")),(0,o.kt)("p",null,"On your personal computer, create the new key pair for SSH authentication."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh-keygen -t rsa -b 4096\n")),(0,o.kt)("h3",{id:"543-defining-a-keyname"},"5.4.3 Defining a keyname"),(0,o.kt)("p",null,"You will be prompted to ",(0,o.kt)("inlineCode",{parentName:"p"},"Enter file in which to save the key"),". Here, it is highly recommended to define a specific name for the key so that you can reference it at a later time, especially if you use multiple keys for different authentications. You can still use the default folder. Exchange:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<your-username>")," with the username of your personal computer"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<your-chosen-keyname>")," with your preferred name of the key without spaces")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"/Users/<your-username>/.ssh/<your-chosen-keyname>\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"If you do not want to specify a name, you can hit ",(0,o.kt)("inlineCode",{parentName:"p"},"Enter")," to generate a random numbered file as I explained above.")),(0,o.kt)("h3",{id:"544-adding-a-passphrase"},"5.4.4 Adding a passphrase"),(0,o.kt)("p",null,"Now, enter a password used to encrypt the key. It is ",(0,o.kt)("strong",{parentName:"p"},"highly recommended")," to choose a strong password to raise the security level if someone gains access to your machine. This is also essential for key backups, if your working machine is demaged during a trip and you need to re-gain access from a fresh machine."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"If you do not want to set up a passphrase, you can hit ",(0,o.kt)("inlineCode",{parentName:"p"},"Enter")," to generate a key without password-encryption.")),(0,o.kt)("h3",{id:"545-backing-up-the-private-key"},"5.4.5 Backing up the private key"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Before you set up the key to your node environment, make sure to generate a backup of it.")),(0,o.kt)("p",null,"Here, you could use a container of a cloud provider to store the file, that can always be accessed even if devices get compromised or destroyed during a trip where you do not get pysical access to your node in any short time. You could also store the backup on a dedicated USB device."),(0,o.kt)("p",null,"Because the key as a passphrase itself, noone could sign anything without also knowing it's password, in case the cloud container is compromised. You could also use a encrypted container to further improve security. Just make sure you always have secure and different passwords."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"After backing up the generated key, we can continue using it in production.")),(0,o.kt)("h3",{id:"546-copying-the-public-key-to-the-node"},"5.4.6 Copying the public key to the node"),(0,o.kt)("p",null,"Copy a generated public key to the node machine. Make sure to replace:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<your-chosen-keyname>")," with your keyfile path"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<ssh-device-alias>")," with your SSH node alias")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh-copy-id -i ~/.ssh/<your-chosen-keyname>.pub <ssh-device-alias>\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"If you set up a custom key directory, change the path as well.")),(0,o.kt)("p",null,"You will be asked to input your node's user password one last time. Then this should be your final output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'Number of key(s) added:        1\n\nNow try logging into the machine, with:   "ssh <ssh-device-alias>"\nand check to make sure that only the key(s) you wanted were added.\n')),(0,o.kt)("p",null,"The command line tool autoimatically disconnects from your node after the key was added. Continue with testing the key login."),(0,o.kt)("h3",{id:"547-checking-for-the-added-keys"},"5.4.7 Checking for the added keys"),(0,o.kt)("p",null,"We can check if the key was added correctly by logging into the node. It will still ask you for the regular node's user password for now."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh <ssh-device-alias>\n")),(0,o.kt)("p",null,"Check if the key was added"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ls -al ~/.ssh/authorized_keys\n")),(0,o.kt)("p",null,"You should find your authentication key in the specific folder. If not, you need to redo the previous step."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Stay logged in to your node to enable secure key authentication in the following step.")))}d.isMDXComponent=!0}}]);